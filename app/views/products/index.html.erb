<p id="notice"><%= notice %></p>
<%= form_tag products_path, :method => :get do %>
  <h1>Search for a Product</h1>
  <%= text_field_tag :search, params[:search] %>
  <%= submit_tag "Search" %>
<% end %>
<table>
  <thead>
    <tr>
      <th>Serial number</th>
      <th>Name</th>
      <th>Price</th>
      <th>Quantity</th>
      <th colspan="3"></th>
    </tr>
  </thead>

  <tbody>
    <% @products.each do |product| %>
      <tr>
        <td><%= product.serial_number %></td>
        <td><%= product.name %></td>
        <td><%= product.price %></td>
        <td><%= product.quantity %></td>
        <td><% if !@current_cart.products.include?(product) %>
                <%=button_to line_items_path(product_id: product.id), class: "btn btn-warning" , style: "margin-top:15px;" , params:{productID: product.id} do %>
                <i class="glyphicon glyphicon-plus" style="color:black;"></i>
                Add to Cart
              <% end %>

              <%else %>
                <ul class="users">
                  <%=link_to line_item_reduce_path(id: @current_cart.line_items.find_by(product_id: product.id)) , method: :post, remote: true, class: "btn btn-danger" , style: "margin-top:15px;" do %>
                  <i class="glyphicon glyphicon-minus" style="color:black;"></i>
                  Reduce
                <% end %>

                <!-- add -->
                <%=link_to line_item_add_path(id: @current_cart.line_items.find_by(product_id: product.id)) , method: :post, remote: true, class: "btn btn-success" , style: "margin-top:15px;" do %>
                <i class="glyphicon glyphicon-plus" style="color:black;"></i>
                Add
              <% end %>

              <!-- Remove -->
              <%=link_to line_item_path(@current_cart.line_items.find_by(product_id: product.id)) ,method: :delete, remote: true, class: "btn btn-warning" , style: "margin-top:15px;" do %>
              <i class="glyphicon glyphicon-remove" style="color:black;"></i>
              Remove Item
            <% end %>

            <li>Quantity:
              <%= @current_cart.line_items.find_by(product_id: product.id).quantity %>
              | Total Price:
              <%= number_to_currency(@current_cart.line_items.find_by(product_id: product.id).total_price) %>
              <hr class="style18"/>
          </ul>
        <%end %>
      </p>
</div>
</td>
        <td><%= link_to 'Show', product %></td>
        <td><%= link_to 'Edit', edit_product_path(product) %></td>

    <% end %>
    <%= link_to "Sign in", new_user_session_path, method: :post %>
<br>
<%= link_to 'New Product', new_product_path %>
<%= link_to "Sign out", destroy_user_session_path, method: :delete %>



